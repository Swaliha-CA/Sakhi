<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safer Product Alternatives - Sakhi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            min-height: 100vh;
            padding: 20px 0;
        }
        .container {
            max-width: 1400px;
        }
        .module-header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
        }
        .alternatives-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .btn-back {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
        }
        .btn-back:hover {
            color: white;
            transform: translateY(-2px);
        }
        .search-bar {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .product-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: all 0.3s;
            border-left: 4px solid #10b981;
        }
        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        .product-card.harmful {
            border-left-color: #ef4444;
        }
        .score-badge {
            font-size: 1rem;
            padding: 6px 12px;
            border-radius: 15px;
            font-weight: bold;
        }
        .score-safe { background: #d1fae5; color: #065f46; }
        .score-moderate { background: #fef3c7; color: #92400e; }
        .score-high { background: #fee2e2; color: #991b1b; }
        .filter-btn {
            margin: 5px;
            padding: 8px 16px;
            border: 2px solid #10b981;
            background: white;
            color: #10b981;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .filter-btn.active {
            background: #10b981;
            color: white;
        }
        .shopping-list {
            background: #f0fdf4;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        .shopping-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .price-tag {
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .availability-badge {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
        }
        .available { background: #d1fae5; color: #065f46; }
        .limited { background: #fef3c7; color: #92400e; }
        .out-of-stock { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="btn-back">
            <i class="fas fa-arrow-left"></i> Back to Hub
        </a>
        
        <div class="module-header">
            <div class="mb-4">
                <i class="fas fa-exchange-alt fa-4x text-success"></i>
            </div>
            <h1>Safer Product Alternatives <span class="badge bg-success">INTERACTIVE</span></h1>
            <p class="lead">Find toxin-free alternatives with personalized recommendations</p>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <div class="search-bar">
                    <h4><i class="fas fa-search text-success"></i> Search Products</h4>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" id="searchInput" placeholder="Search for products (e.g., shampoo, soap, lotion)">
                        <button class="btn btn-success" onclick="searchProducts()">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    
                    <div class="mb-3">
                        <strong>Categories:</strong><br>
                        <button class="filter-btn active" data-category="all" onclick="filterByCategory('all')">All</button>
                        <button class="filter-btn" data-category="hair-care" onclick="filterByCategory('hair-care')">Hair Care</button>
                        <button class="filter-btn" data-category="skin-care" onclick="filterByCategory('skin-care')">Skin Care</button>
                        <button class="filter-btn" data-category="body-care" onclick="filterByCategory('body-care')">Body Care</button>
                        <button class="filter-btn" data-category="baby-care" onclick="filterByCategory('baby-care')">Baby Care</button>
                    </div>
                    
                    <div class="mb-3">
                        <strong>Sort by:</strong>
                        <select class="form-select d-inline-block w-auto ms-2" id="sortSelect" onchange="sortProducts()">
                            <option value="safety">Safety Score</option>
                            <option value="price">Price</option>
                            <option value="rating">User Rating</option>
                            <option value="availability">Availability</option>
                        </select>
                    </div>
                </div>

                <div class="alternatives-card">
                    <h3><i class="fas fa-list text-primary"></i> Product Recommendations</h3>
                    <div id="productList">
                        <!-- Products will be loaded here -->
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="alternatives-card">
                    <h4><i class="fas fa-shopping-cart text-success"></i> Shopping List</h4>
                    <div id="shoppingList" class="shopping-list">
                        <p class="text-muted text-center">Add products to your shopping list</p>
                    </div>
                    <div class="text-center mt-3">
                        <button class="btn btn-success" onclick="exportShoppingList()">
                            <i class="fas fa-download"></i> Export List
                        </button>
                        <button class="btn btn-outline-success" onclick="clearShoppingList()">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                </div>

                <div class="alternatives-card">
                    <h4><i class="fas fa-chart-bar text-info"></i> Quick Stats</h4>
                    <div class="row text-center">
                        <div class="col-6">
                            <h3 class="text-success">500+</h3>
                            <small class="text-muted">Safe Products</small>
                        </div>
                        <div class="col-6">
                            <h3 class="text-warning">1,200+</h3>
                            <small class="text-muted">Alternatives Found</small>
                        </div>
                    </div>
                    <div class="row text-center mt-3">
                        <div class="col-6">
                            <h3 class="text-info">95%</h3>
                            <small class="text-muted">User Satisfaction</small>
                        </div>
                        <div class="col-6">
                            <h3 class="text-primary">24/7</h3>
                            <small class="text-muted">Updates</small>
                        </div>
                    </div>
                </div>

                <div class="alternatives-card">
                    <h4><i class="fas fa-bell text-warning"></i> Notifications</h4>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="newProductAlerts" checked>
                        <label class="form-check-label" for="newProductAlerts">
                            New product alerts
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="priceDrops" checked>
                        <label class="form-check-label" for="priceDrops">
                            Price drop notifications
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="safetyUpdates">
                        <label class="form-check-label" for="safetyUpdates">
                            Safety updates
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample product database
        const products = [
            {
                id: 1,
                name: "Organic Herbal Shampoo",
                category: "hair-care",
                brand: "Nature's Best",
                safetyScore: 15,
                price: 299,
                rating: 4.8,
                availability: "available",
                ingredients: ["Aloe Vera", "Coconut Oil", "Neem Extract"],
                harmfulChemicals: [],
                description: "100% natural shampoo with organic ingredients",
                benefits: ["Sulfate-free", "Paraben-free", "Chemical-free"]
            },
            {
                id: 2,
                name: "Chemical Shampoo",
                category: "hair-care",
                brand: "Regular Brand",
                safetyScore: 75,
                price: 150,
                rating: 3.2,
                availability: "available",
                ingredients: ["SLS", "Parabens", "Sulfates"],
                harmfulChemicals: ["Sodium Lauryl Sulfate", "Methylparaben"],
                description: "Regular shampoo with chemical ingredients",
                benefits: [],
                isHarmful: true
            },
            {
                id: 3,
                name: "Natural Face Cream",
                category: "skin-care",
                brand: "Pure Skin",
                safetyScore: 22,
                price: 450,
                rating: 4.6,
                availability: "limited",
                ingredients: ["Shea Butter", "Jojoba Oil", "Vitamin E"],
                harmfulChemicals: [],
                description: "Moisturizing face cream with natural ingredients",
                benefits: ["Fragrance-free", "Hypoallergenic", "Dermatologist tested"]
            },
            {
                id: 4,
                name: "Ayurvedic Body Soap",
                category: "body-care",
                brand: "Herbal Care",
                safetyScore: 18,
                price: 89,
                rating: 4.7,
                availability: "available",
                ingredients: ["Turmeric", "Neem", "Coconut Oil"],
                harmfulChemicals: [],
                description: "Traditional Ayurvedic soap with healing properties",
                benefits: ["Antibacterial", "Natural", "Skin-friendly"]
            },
            {
                id: 5,
                name: "Baby Gentle Lotion",
                category: "baby-care",
                brand: "Little Angels",
                safetyScore: 12,
                price: 320,
                rating: 4.9,
                availability: "available",
                ingredients: ["Chamomile", "Calendula", "Organic Oils"],
                harmfulChemicals: [],
                description: "Ultra-gentle lotion for sensitive baby skin",
                benefits: ["Pediatrician approved", "Tear-free", "Organic"]
            },
            {
                id: 6,
                name: "Toxic Body Wash",
                category: "body-care",
                brand: "Chemical Co",
                safetyScore: 85,
                price: 199,
                rating: 2.8,
                availability: "out-of-stock",
                ingredients: ["Triclosan", "Artificial Fragrances", "Sulfates"],
                harmfulChemicals: ["Triclosan", "Phthalates"],
                description: "Body wash with harmful chemicals",
                benefits: [],
                isHarmful: true
            }
        ];

        let currentProducts = [...products];
        let shoppingCart = [];
        let currentCategory = 'all';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayProducts(currentProducts);
            
            // Add search functionality
            document.getElementById('searchInput').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchProducts();
                }
            });
        });

        function displayProducts(productsToShow) {
            const productList = document.getElementById('productList');
            
            if (productsToShow.length === 0) {
                productList.innerHTML = '<p class="text-center text-muted">No products found matching your criteria.</p>';
                return;
            }

            productList.innerHTML = productsToShow.map(product => `
                <div class="product-card ${product.isHarmful ? 'harmful' : ''}">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <div class="d-flex align-items-center mb-2">
                                <h5 class="mb-0 me-3">${product.name}</h5>
                                <span class="score-badge ${getScoreClass(product.safetyScore)}">${product.safetyScore}</span>
                                ${product.isHarmful ? '<span class="badge bg-danger ms-2">Avoid</span>' : '<span class="badge bg-success ms-2">Safe</span>'}
                            </div>
                            <p class="text-muted mb-2">${product.brand} ‚Ä¢ ${product.description}</p>
                            <div class="mb-2">
                                <strong>Ingredients:</strong> ${product.ingredients.slice(0, 3).join(', ')}${product.ingredients.length > 3 ? '...' : ''}
                            </div>
                            ${product.harmfulChemicals.length > 0 ? `
                                <div class="mb-2">
                                    <strong class="text-danger">Harmful:</strong> ${product.harmfulChemicals.join(', ')}
                                </div>
                            ` : ''}
                            <div class="mb-2">
                                ${product.benefits.map(benefit => `<span class="badge bg-light text-dark me-1">${benefit}</span>`).join('')}
                            </div>
                            <div class="d-flex align-items-center">
                                <span class="me-3">‚≠ê ${product.rating}/5</span>
                                <span class="availability-badge ${product.availability}">${getAvailabilityText(product.availability)}</span>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="price-tag mb-3">‚Çπ${product.price}</div>
                            ${!product.isHarmful ? `
                                <button class="btn btn-success btn-sm" onclick="addToCart(${product.id})">
                                    <i class="fas fa-cart-plus"></i> Add to List
                                </button>
                            ` : `
                                <button class="btn btn-outline-success btn-sm" onclick="findAlternative(${product.id})">
                                    <i class="fas fa-search"></i> Find Alternative
                                </button>
                            `}
                            <button class="btn btn-outline-info btn-sm ms-1" onclick="viewDetails(${product.id})">
                                <i class="fas fa-info"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getScoreClass(score) {
            if (score <= 30) return 'score-safe';
            if (score <= 70) return 'score-moderate';
            return 'score-high';
        }

        function getAvailabilityText(availability) {
            switch(availability) {
                case 'available': return 'In Stock';
                case 'limited': return 'Limited Stock';
                case 'out-of-stock': return 'Out of Stock';
                default: return 'Unknown';
            }
        }

        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm === '') {
                currentProducts = products.filter(p => currentCategory === 'all' || p.category === currentCategory);
            } else {
                currentProducts = products.filter(product => 
                    (currentCategory === 'all' || product.category === currentCategory) &&
                    (product.name.toLowerCase().includes(searchTerm) ||
                     product.brand.toLowerCase().includes(searchTerm) ||
                     product.description.toLowerCase().includes(searchTerm) ||
                     product.ingredients.some(ing => ing.toLowerCase().includes(searchTerm)))
                );
            }
            
            displayProducts(currentProducts);
        }

        function filterByCategory(category) {
            currentCategory = category;
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            searchProducts(); // This will apply the category filter
        }

        function sortProducts() {
            const sortBy = document.getElementById('sortSelect').value;
            
            currentProducts.sort((a, b) => {
                switch(sortBy) {
                    case 'safety':
                        return a.safetyScore - b.safetyScore;
                    case 'price':
                        return a.price - b.price;
                    case 'rating':
                        return b.rating - a.rating;
                    case 'availability':
                        const availabilityOrder = { 'available': 0, 'limited': 1, 'out-of-stock': 2 };
                        return availabilityOrder[a.availability] - availabilityOrder[b.availability];
                    default:
                        return 0;
                }
            });
            
            displayProducts(currentProducts);
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product && !shoppingCart.find(item => item.id === productId)) {
                shoppingCart.push(product);
                updateShoppingList();
                
                // Show success message
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> Added';
                btn.classList.remove('btn-success');
                btn.classList.add('btn-outline-success');
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('btn-outline-success');
                    btn.classList.add('btn-success');
                }, 2000);
            }
        }

        function updateShoppingList() {
            const shoppingListDiv = document.getElementById('shoppingList');
            
            if (shoppingCart.length === 0) {
                shoppingListDiv.innerHTML = '<p class="text-muted text-center">Add products to your shopping list</p>';
                return;
            }

            const total = shoppingCart.reduce((sum, item) => sum + item.price, 0);
            
            shoppingListDiv.innerHTML = `
                ${shoppingCart.map(item => `
                    <div class="shopping-item">
                        <div class="flex-grow-1">
                            <strong>${item.name}</strong><br>
                            <small class="text-muted">${item.brand}</small>
                        </div>
                        <div class="text-end">
                            <div class="price-tag">‚Çπ${item.price}</div>
                            <button class="btn btn-sm btn-outline-danger mt-1" onclick="removeFromCart(${item.id})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `).join('')}
                <div class="mt-3 pt-3 border-top">
                    <strong>Total: ‚Çπ${total}</strong>
                </div>
            `;
        }

        function removeFromCart(productId) {
            shoppingCart = shoppingCart.filter(item => item.id !== productId);
            updateShoppingList();
        }

        function clearShoppingList() {
            shoppingCart = [];
            updateShoppingList();
        }

        function exportShoppingList() {
            if (shoppingCart.length === 0) {
                alert('Your shopping list is empty!');
                return;
            }
            
            alert(`üìã Shopping List Exported!\n\nItems: ${shoppingCart.length}\nTotal: ‚Çπ${shoppingCart.reduce((sum, item) => sum + item.price, 0)}\n\nExported as:\n‚Ä¢ PDF document\n‚Ä¢ WhatsApp message\n‚Ä¢ Email list\n‚Ä¢ Shopping app integration`);
        }

        function findAlternative(productId) {
            const product = products.find(p => p.id === productId);
            const alternatives = products.filter(p => 
                p.category === product.category && 
                !p.isHarmful && 
                p.id !== productId
            );
            
            if (alternatives.length > 0) {
                alert(`üîç Found ${alternatives.length} safer alternatives for ${product.name}:\n\n${alternatives.slice(0, 3).map(alt => `‚Ä¢ ${alt.name} (Score: ${alt.safetyScore})`).join('\n')}\n\nWould you like to view all alternatives?`);
            } else {
                alert('No safer alternatives found in our database. We\'ll notify you when new products are added!');
            }
        }

        function viewDetails(productId) {
            const product = products.find(p => p.id === productId);
            alert(`üìã Product Details\n\nName: ${product.name}\nBrand: ${product.brand}\nSafety Score: ${product.safetyScore}/100\nPrice: ‚Çπ${product.price}\nRating: ${product.rating}/5\n\nIngredients: ${product.ingredients.join(', ')}\n\n${product.harmfulChemicals.length > 0 ? `Harmful Chemicals: ${product.harmfulChemicals.join(', ')}\n\n` : ''}Benefits: ${product.benefits.join(', ')}\n\nDescription: ${product.description}`);
        }

        // Initialize with demo search
        setTimeout(() => {
            document.getElementById('searchInput').value = 'shampoo';
            searchProducts();
        }, 1000);
    </script>
</body>
</html>